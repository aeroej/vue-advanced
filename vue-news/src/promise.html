<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>jquery ajax</div>
    <script>
        // 2
        function callAjax() {
            return new Promise(function(resolve, reject) {
                $.ajax({
                    url: 'https://api.hnpwa.com/v0/newx/1.json',
                    success: function(data){
                        resolve(data);
                    }
                });
            })
        }
        
        function fetchData() {
            // 1
            var result = [];

            // 3
            callAjax()
              .then(data => {
                  console.log('데이터 호출 결과', data);
                  result = data;
                  console.log('함수 결과', result);
              })
              .catch(error => console.log(error));

              
            // 2, 3
            // ajax 호출함수 안에 callback함수 존재 (data를 result에 할당하는 함수가 인자임)
            // => 이 둘을 Promise로 나눌 것
            //
            // $.ajax({
            //     url: 'https://api.hnpwa.com/v0/newx/1.json',
            //     success: function(data) {
            //         console.log('데이터 호출 결과', data);
            //         result = data;
            //         console.log('함수 결과', result);
            //     }
            // });
        }
    </script>
</body>
</html>